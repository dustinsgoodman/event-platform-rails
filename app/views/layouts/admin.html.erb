<!DOCTYPE html>
<html>
  <head>
    <title>EventPlatformRails</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>

    <% if current_user %>
    <div class="user-info">
      <div>
        <strong>Who am I?</strong> <%= current_user.email %>
      </div>
      <div>
        <strong>What org is this?</strong> <%= current_user.current_platform_organization.try(:name) || 'No Org Found' %>
      </div>
      <div>
        What orgs can I see?
        <ul>
          <% current_user.platform_organizations.each do |org| %>
            <li>
              <%= button_to(
                org.name,
                change_current_organization_path(org)
              ) %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
    <% end %>

    <% if user_signed_in? %>
      <%= button_to(
        "Log Out",
        destroy_user_session_path,
        method: :delete
      ) %>
    <% else %>
      <%= button_to(
        "Log In",
        new_user_session_path
      ) %>
    <% end %>
    <%= yield %>
  </body>
</html>
